# Contributing

Contributors are very welcome! **No contribution is too small and all contributions are valued.**

Some suggestions to get started:

- You can look at the [good first issue][good-first-issue] label on the issue tracker.
- Help with packaging on various distributions needed!
- Instead of running a release version of Helix, while developing you may want to run in debug mode with `cargo run` which is way faster to compile
- Looking for even faster compile times? Give a try to [mold](https://github.com/rui314/mold)
- If your preferred language is missing, integrating a tree-sitter grammar for
    it and defining syntax highlight queries for it is straight forward and
    doesn't require much knowledge of the internals.

We provide an [architecture.md][architecture.md] that should give you
a good overview of the internals.

## Logging

To use print debugging to the [Helix log file][log-file], you must:
1. Emit log events by calling `log::<event>!()`, e.g. `log::info!("{}", x)`.
2. Set the log level before starting Helix. This can be done by passing the -v flag where more `v`'s imply a higher verbosity level, e.g. `hx -vvv`. The `HELIX_LOG_LEVEL` env variable can alternatively be set to override any defaults/provided verbosity flags.

| `log::<event>!` | Number of `v`s in CLI command | `$HELIX_LOG_LEVEL` |
| ---             | ---                           | ---                |
| -               | -                             | "OFF"              |
| `error!`        | 0                             | "ERROR"            |
| `warn!`         | 0                             | "WARN"             |
| `info!`         | 1                             | "INFO"             |
| `debug!`        | 2                             | "DEBUG"            |
| `trace!`        | > 3                           | "TRACE"            |

Logs can then be viewed by opening the log file from helix with `:log-open`. It is also possible to output the log contents directly to the `std out` by running something akin to:

```bash
  cargo run -- --log foo.log
  # And in another terminal
  tail --follow foo.log
```

# Auto generated documentation

Some parts of [the book][docs] are autogenerated from the code itself,
like the list of `:commands` and supported languages. To generate these
files, run

```shell
cargo xtask docgen
```

inside the project. We use [xtask][xtask] as an ad-hoc task runner and
thus do not require any dependencies other than `cargo` (You don't have
to `cargo install` anything either).

# Testing

## Unit tests/Documentation tests

Run `cargo test --workspace` to run the unit, integration, and documentation
tests in all packages.

Code contributors are strongly encouraged to write tests for their code.
Existing tests can be used as examples. Helpers can be found in `helix_term/
tests/test/helpers`.

## Minimum Stable Rust Version (MSRV) Policy

Helix follows the MSRV of Firefox.
The current MSRV and future changes to the MSRV are listed in the [Firefox documentation].

[Firefox documentation]: https://firefox-source-docs.mozilla.org/writing-rust-code/update-policy.html
[good-first-issue]: https://github.com/helix-editor/helix/labels/E-easy
[log-file]: https://github.com/helix-editor/helix/wiki/FAQ#access-the-log-file
[architecture.md]: ./architecture.md
[docs]: https://docs.helix-editor.com/
[xtask]: https://github.com/matklad/cargo-xtask
[helpers.rs]: ../helix-term/tests/test/helpers.rs
