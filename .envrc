watch_file nix/shell.nix
watch_file nix/flake.lock

# try to use flakes, if it fails use normal nix (ie. shell.nix)
use flake || use nix
eval "$shellHook"